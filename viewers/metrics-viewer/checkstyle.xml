<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<module name="Checker">

    <property name="severity" value="warning"/>
    <property name="tabWidth" value="4"/>

    <!-- 行頭スペース禁止（コメント行は除外） -->
    <module name="RegexpSingleline">
        <property name="format" value="^( +)(?![*\/])\S"/>
        <property name="message" value="行頭のインデントはタブを使用してください（コード行先頭スペース禁止）。"/>
        <property name="severity" value="warning"/>
    </module>

    <!-- 行長制限 -->
    <module name="LineLength">
        <property name="max" value="120"/>
        <property name="ignorePattern" value="^package|^import"/>
    </module>

    <module name="TreeWalker">

        <module name="OuterTypeFilename"/>

        <module name="IllegalToken">
            <property name="tokens" value="LITERAL_ASSERT"/>
        </module>

        <!-- 空ブロック禁止（コメント付きは許可） -->
        <module name="EmptyBlock">
            <property name="option" value="text"/>
            <property name="tokens"
              value="LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY,
                     LITERAL_FOR, LITERAL_IF, LITERAL_SWITCH, LITERAL_TRY, LITERAL_WHILE"/>
        </module>

        <!-- 1行 if / return 許容 -->
        <module name="NeedBraces">
            <property name="allowSingleLineStatement" value="true"/>
        </module>

        <!-- { は同行 -->
        <module name="LeftCurly">
            <property name="option" value="eol"/>
            <property name="tokens"
                value="CLASS_DEF, INTERFACE_DEF, ENUM_DEF,
                       CTOR_DEF, METHOD_DEF, LAMBDA,
                       LITERAL_IF, LITERAL_ELSE,
                       LITERAL_FOR, LITERAL_WHILE, LITERAL_DO,
                       LITERAL_SWITCH, LITERAL_SYNCHRONIZED,
                       LITERAL_TRY, LITERAL_CATCH, LITERAL_FINALLY"/>
        </module>

        <!-- } は常に同行を許可（RightCurly制約を緩める） -->
        <module name="RightCurly">
            <property name="option" value="same"/>
        </module>

        <module name="WhitespaceAround"/>
        <module name="WhitespaceAfter"/>

        <!-- タブインデント（switch-case は1段深く） -->
        <module name="Indentation">
            <property name="tabWidth" value="4"/>
            <property name="basicOffset" value="4"/>
            <property name="braceAdjustment" value="0"/>
            <property name="caseIndent" value="4"/>
            <property name="throwsIndent" value="4"/>
            <property name="lineWrappingIndentation" value="8"/>
        </module>

        <!-- 変数宣言連続時の空行不要 -->
        <module name="EmptyLineSeparator">
            <property name="tokens"
                value="PACKAGE_DEF, IMPORT, CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF"/>
        </module>

        <!-- 名前規約 -->
        <module name="FinalLocalVariable"/>
        <module name="LocalVariableName"/>
        <module name="MemberName"/>
        <module name="MethodName"/>
        <module name="ParameterName"/>
        <module name="StaticVariableName"/>
        <module name="TypeName"/>

    </module>
</module>
