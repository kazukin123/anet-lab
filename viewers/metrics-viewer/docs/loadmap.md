## MetricsViewer.java ロードマップ

| フェーズ                            | 主目的                                   | 主なUI構成                                                                     | 中核機能                                                                                                  | 備考                                                |
| ------------------------------- | ------------------------------------- | -------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| **Phase 1：基礎UIと初期描画機能**         | 画面を開くだけで「最新Runの全体像」が即見える。基本操作・描画系を確立。 | - 左サイドパネル（Run・Tagリスト）- 右メイン領域（縦スクロールPlotlyグラフ）- 上部ヘッダバー（タイトル・Reload・モード切替） | - 最新Run自動選択＋全タグ自動描画- Runリセット（最新Run再選択）- 全タグ選択／解除- タグ表示ON／OFFトグル- パネル折りたたみボタン- ロード中もグラフ視認維持            | **骨格確立フェーズ。** 通信・描画・状態管理を固定。以後の拡張はこの構造をベースに積み上げる。 |
| **Phase 1.5：UI拡張と差分ロード基盤**      | 初期構造を拡張し、ユーザ操作と軽量化機能を強化。              | - 既存UI骨格を継承- ハイパラ／タグ操作系を追加                                                 | - ハイパラ情報整形表示（JSON）- 差分ロード／AutoReload（sinceStep対応）- 軽量リロード（差分fetch＋mergeCache）- JSONL読込スケジューリング最適化     | 差分処理をフロント単体で試験。**Phase 2への橋渡し。**                  |
| **Phase 2：分析支援と情報拡張（JqGrid導入）** | タグ・Run・統計・ハイパラ情報を効率的に扱う。              | - 左パネル内にJqGridテーブル- Display Options領域（スムージング・ログスケール）- メイン領域はPhase 1構造継承    | - タグ並び替え（jQuery UI Sortable）- 統計表示（平均／最終値／分散）- スムージング・ログスケール切替- フィルタ・検索・列ソート- 表示ON／OFF列制御- 検索クエリ保存／復元 | グループ化UIを廃止し、**JqGridで一元管理**。                      |
| **Phase 3：画像・動画タグ統合**           | 数値以外の出力も同一UIで可視化。                     | - GraphBlock拡張（縦スクロール一貫構成）                                                 | - `image/`タグ → サムネイル・拡大表示- `video/`タグ → HTML5 video埋め込み（poster対応）- Plotlyグラフとの混在表示                    | メディアタグも同一フィルタで扱う。                                 |
| **Phase 4：UX最適化と状態保持**          | 操作継続性・性能を高め、長期運用に耐える。                 | - 全UI共通（保存／復元機能追加）                                                         | - Run／Tag選択・並び順・表示状態をLocalStorage保存- フィルタクエリ保存・ロード- 差分ロード・部分再描画（Plotly.react最適化）- 描画進行インジケータ改良        | 長期利用・大量データ対応。**分析セッション再現性を確保。**                   |
